<html>
	<head>
		<title>Gee Mail</title>
		<script src="js/mail-generator.js"></script>
        
        <link href="https://fonts.googleapis.com/css?family=Bahiana" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Rock+Salt" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet" media="screen">
        <link href="https://fonts.googleapis.com/css?family=Permanent+Marker" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Sedgwick+Ave+Display" rel="stylesheet">

    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

        var mailCount = 0;

        // console.log(window.geemails);

        var mails = window.geemails;

        var iNter = setInterval(function(){ makeLine(getNewMessage()) }, 3000);

        function showText(){
            var see = this.querySelectorAll(".contents")[0];
            if (see.style.display === "none"){
            see.style.display = "block";
            }else{
            see.style.display = "none";
            }
        }

        function makeLine (obj){

        	var bawdy = document.getElementById("main");
        	var letter = document.createElement("div");
        	letter.class = "messages";
        	var deets = document.createElement("section");
        	deets.class = "details";

        	var sEnder = document.createElement("li");
        	sEnder.class = "senders";
        	sEnder.innerHTML = "<h3>"+obj.sender+"</h3>";
        	deets.appendChild(sEnder);

        	var sUbject = document.createElement("li");
        	sUbject.class = "subjs";
        	sUbject.innerHTML = "<h3>"+obj.subject+"</h3>";
        	deets.appendChild(sUbject);

        	var dAte = document.createElement("li");
        	dAte.class = "dates";
        	dAte.innerHTML = "<h4>"+obj.date+"</h4>";
        	deets.appendChild(dAte);

        	letter.appendChild(deets);

            var switchBox = document.createElement("li");
            deets.appendChild(switchBox);
            var showSwitch = document.createElement("button");
            showSwitch.class = "shower";
            showSwitch.innerHTML = "Show Message";
            showSwitch.addEventListener("click", showText);
            switchBox.appendChild(showSwitch);

        	var cOntent = document.createElement("p");
        	cOntent.class = "contents";
        	cOntent.innerHTML = obj.body;
        	letter.appendChild(cOntent);

        	bawdy.appendChild(letter);

        	mailCount++;

        	var showCount = mailCount.toString();
        	var countSpace = document.getElementById("count");
        	countSpace.innerHTML = showCount;
        }

        for (var i = 0; i < mails.length; i++){
        	makeLine(mails[i]);
        }
        // stretch goals: helper functions

		var hed = document.getElementById(count);

        function makeStop() {
            clearInterval(iNter);
        }

        var stahp = document.getElementById("stopper");
        stahp.addEventListener("click", makeStop);

      };
    </script>
	</head>
	<body>
		<header>
			<h1 id= "title">Gee MaiL</h1>
			<h2 id= "subHead">Email for Oh Gees</h2>
			<div id="count"></div>
            <button id="stopper">Make it Stop!</button>
		</header>
		<div class="container" id="main">
		</div>
	</body>
</html>